
var picHorScroll=(function(window,document){function prefixStyle(style){if(vendor===""){return style}style=style.charAt(0).toUpperCase()+style.substr(1);return vendor+style}var dummyStyle=document.createElement("div").style,vendor=(function(){var vendors="t,webkitT,MozT,msT,OT".split(","),t,i=0,l=vendors.length;for(;i<l;i++){t=vendors[i]+"ransform";if(t in dummyStyle){return vendors[i].substr(0,vendors[i].length-1)}}return false})(),cssVendor=vendor?"-"+vendor.toLowerCase()+"-":"",transform=prefixStyle("transform"),has3d=prefixStyle("perspective") in dummyStyle,hasTouch="ontouchstart" in window,hasTransform=!!vendor,hasTransitionEnd=prefixStyle("transition") in dummyStyle,translateZ=has3d?" translateZ(0)":"",resizeEvent="onorientationchange" in window?"orientationchange":"resize",startEvent=hasTouch?"touchstart":"mousedown",moveEvent=hasTouch?"touchmove":"mousemove",endEvent=hasTouch?"touchend":"mouseup",cancelEvent=hasTouch?"touchcancel":"mouseup",transitionEndEvent=(function(){if(vendor===false){return false}var transitionEnd={"":"transitionend","webkit":"webkitTransitionEnd","Moz":"transitionend","O":"oTransitionEnd","ms":"MSTransitionEnd"};return transitionEnd[vendor]})();var picHorScroll=function(el,options){this.wraps=typeof el=="string"?document.getElementById(el):el;this.wrap=this.wraps.children[0];this.slides=this.wrap.children;if(this.slides.length<=0){return}this.cellWidth=this.slides[0].offsetWidth;this.wrapwidth=this.slides.length*this.cellWidth;if(this.cellWidth*this.slides.length<this.wraps.offsetWidth){return}this.wraps.style.visibility="visible";this.movewidth=this.wrapwidth-this.wraps.clientWidth;this.init()};picHorScroll.prototype={way:0,newX:0,moveX:0,init:function(){var _this=this;_this.wrap.addEventListener(startEvent,function(e){_this.__start(e)},false);_this.wrap.addEventListener(moveEvent,function(e){_this.__move(e)},false);_this.wrap.addEventListener(endEvent,function(e){_this.__end(e)},false);window.addEventListener(resizeEvent,function(e){_this.movewidth=_this.wrapwidth-_this.wraps.clientWidth;_this.newX=0;_this.__pos(_this.newX)},false)},__pos:function(x,duration){if(duration){this.wrap.style.cssText=cssVendor+"transform:translate3d("+x+"px,0,0);"+cssVendor+"transition-duration:"+duration+"s"}else{this.wrap.style.cssText=cssVendor+"transform:translate3d("+x+"px,0,0);"}},__start:function(e){if(this.initiated){return}this.initiated=true;var _this=this;var point=hasTouch?e.touches[0]:e;this.startX=point.pageX;this.startY=point.pageY;this.pointX=point.pageX;this.pointY=point.pageY;this.stepsX=0;this.stepsY=0;this.directionX=0},__move:function(e){if(!this.initiated){return}var _this=this;var point=hasTouch?e.touches[0]:e,deltaX=point.pageX-this.pointX,deltaY=0;if(deltaX<0){this.way=true}if(deltaX>0){this.way=false}if(deltaX==0){return}_this.stepsX=Math.abs(deltaX);_this.stepsY=0;this.stepsX=_this.stepsX;this.stepsY=0;if((_this.newX==0)&&this.way==0){}if((this.movewidth==Math.abs(_this.newX))&&this.way==1){}_this.moveX=_this.newX+deltaX;e.preventDefault();_this.__pos(_this.moveX)},__end:function(e){var _this=this;if(!this.initiated){return}this.initiated=false;_this.newX=_this.moveX;var point=hasTouch?e.changedTouches[0]:e,dist=Math.abs(point.pageX-_this.startX);if(_this.way){if((Math.abs(_this.newX)>=this.movewidth)){_this.newX=-_this.movewidth}else{_this.newX=_this.newX}}else{if(_this.newX>=0){_this.newX=0}else{_this.newX=_this.newX}}var passed=Math.round(Math.abs(_this.newX)/this.cellWidth);var showNum=passed+Math.abs(Math.ceil(this.wraps.offsetWidth/this.cellWidth));if(showNum>_this.slides.length){showNum=_this.slides.length}for(var i=0;i<showNum;i++){var imgObj=_this.slides[i].querySelector("img");if(imgObj.getAttribute("$src")){imgObj.setAttribute("src",imgObj.getAttribute("$src"));imgObj.removeAttribute("$src")}}_this.__pos(_this.newX,0.3)}};return picHorScroll})(window,document);